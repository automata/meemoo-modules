<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>canvas array</title>
  <meta name="author" content="forresto">
  <meta name="description" content="hold a stack of canvases for reuse, click sends it, arrows navigate to prev/next" />
  
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  
  <script src="http://meemoo.org/meemoo/meemoo.js"></script>
  
  <style type="text/css">
    html, body {
      margin:0 0 100px 0;
      padding:0;
      font-family: verdana;
      font-size: 10px;
    }
    canvas {
      cursor: pointer;
    }
  </style>
</head>
<body>
  
  <script type="text/javascript">
    
    var canvasarray = [];
    var count = 0;
    var viewing = 0;
    
    $(document).mouseover(function(e){
      $("body").focus();
    });
    
    $(document).keydown(function(e){
      // Left
      if ((e.keyCode === 37 || e.keyCode === 38) && viewing > 0) { 
        e.preventDefault();
        viewing--;
        window.scroll(0, $("#c"+viewing).offset().top);
        return false;
      }
      else if ((e.keyCode === 39 || e.keyCode === 40) && viewing < count-1) { 
        e.preventDefault();
        viewing++;
        window.scroll(0, $("#c"+viewing).offset().top);
        return false;
      }
    });
    
    Meemoo.addInputs({
      image: {
        action: function (imageData) {
          var c = $('<canvas />')
            .attr({
              id: 'c'+count,
              width: imageData.width,
              height: imageData.height,
              title: "image "+(count+1)+": click to send, arrow keys to scroll"
            })
            .click(function(e){ 
              Meemoo.send("image", e.target.getContext("2d").getImageData(0,0,e.target.width,e.target.height) );
            });
          c[0].getContext("2d").putImageData(imageData,0,0);
          $("body").append(c);
          
          canvasarray.push(c);
          
          window.scroll(0, c.offset().top);
          viewing = count;
          count++;
        },
        type: "image"
      }
      
    }).addOutputs({
      image: {
        type: "image"
      }
    });
    
  </script>
  
</body>
</html>